{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@ffmpeg/ffmpeg/src/utils/resolvePaths.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/worker/browser/index.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/utils/getEnvironment.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/worker/browser/terminateWorker.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/worker/browser/defaultOptions.js","webpack:///./node_modules/resolve-url/resolve-url.js","webpack:///./node_modules/idb/build/esm/chunk.js","webpack:///./node_modules/idb/build/esm/index.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/utils/getId.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/createJob.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/createWorker.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/worker/browser/onMessage.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/worker/browser/fs.js","webpack:///./src/Worker.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/utils/log.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/worker/browser/spawnWorker.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/utils/extractProgress.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/worker/browser/fetchFile.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/constants/defaultOptions.js","webpack:///./node_modules/@ffmpeg/ffmpeg/src/worker/browser/send.js","webpack:///./node_modules/process/browser.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isBrowser","resolveURL","options","opts","forEach","defaultOptions","spawnWorker","terminateWorker","onMessage","send","fetchFile","fs","env","type","window","document","worker","terminate","version","dependencies","workerPath","process","FFMPEG_ENV","Math","random","toString","slice","corePath","substring","workerBlobURL","root","factory","this","resolveUrl","numUrls","arguments","length","Error","base","createElement","href","head","getElementsByTagName","insertBefore","firstChild","resolved","a","index","removeChild","instanceOfAny","constructors","some","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","IDBDatabase","IDBObjectStore","IDBIndex","IDBCursor","IDBTransaction","getCursorAdvanceMethods","advance","continue","continuePrimaryKey","cursorRequestMap","WeakMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","request","promise","Promise","resolve","reject","unlisten","removeEventListener","success","error","wrap","result","addEventListener","then","set","catch","cacheDonePromiseForTransaction","tx","has","done","complete","idbProxyTraps","target","prop","receiver","objectStoreNames","undefined","objectStore","addTraps","callback","wrapFunction","func","transaction","includes","args","apply","unwrap","storeNames","sort","transformCachableValue","Proxy","IDBRequest","newValue","openDB","blocked","upgrade","blocking","indexedDB","open","openPromise","event","oldVersion","newVersion","db","deleteDB","deleteDatabase","readMethods","writeMethods","cachedMethods","Map","getMethod","targetFuncName","replace","useIndex","isWrite","method","async","storeName","store","shift","returnVal","oldTraps","prefix","cnt","getId","jobCounter","id","_id","action","payload","createJob","log","extractProgress","resolvePaths","workerCounter","_options","logger","progress","resolves","rejects","setResolve","res","setReject","rej","startJob","jobId","workerId","load","syncfs","populate","write","path","data","writeFile","writeText","text","read","del","readFile","deleteFile","remove","run","transcode","input","output","trim","from","to","concatDemuxer","reduce","acc","ls","status","_data","Uint8Array","keys","handler","onmessage","getDB","getDataKeyAndMode","dummy","dataKey","filter","k","pop","put","timestamp","Date","delete","createWorker","postMessage","logging","setLogging","_logging","console","Blob","URL","blob","Worker","createObjectURL","duration","ts2sec","ts","h","split","parseFloat","message","startsWith","ratio","readFromBlobOrFile","fileReader","FileReader","onload","onerror","code","readAsArrayBuffer","test","atob","map","charCodeAt","fetch","arrayBuffer","File","packet","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","e","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","Item","array","noop","nextTick","Array","push","title","browser","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask"],"mappings":"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","file":"31ccb91ed47abff97eeb.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"906b\");\n","const isBrowser = require('./getEnvironment')('type') === 'browser';\nconst resolveURL = isBrowser ? require('resolve-url') : s => s; // eslint-disable-line\n\nmodule.exports = (options) => {\n  const opts = { ...options };\n  ['corePath', 'workerPath'].forEach((key) => {\n    if (typeof options[key] !== 'undefined') {\n      opts[key] = resolveURL(opts[key]);\n    }\n  });\n  return opts;\n};\n","/**\n *\n * Tesseract Worker adapter for browser\n *\n * @fileoverview Tesseract Worker adapter for browser\n * @author Kevin Kwok <antimatter15@gmail.com>\n * @author Guillermo Webster <gui@mit.edu>\n * @author Jerome Wu <jeromewus@gmail.com>\n */\nconst defaultOptions = require('./defaultOptions');\nconst spawnWorker = require('./spawnWorker');\nconst terminateWorker = require('./terminateWorker');\nconst onMessage = require('./onMessage');\nconst send = require('./send');\nconst fetchFile = require('./fetchFile');\nconst fs = require('./fs');\n\nmodule.exports = {\n  defaultOptions,\n  spawnWorker,\n  terminateWorker,\n  onMessage,\n  send,\n  fetchFile,\n  fs,\n};\n","module.exports = (key) => {\n  const env = {\n    type: (typeof window !== 'undefined') && (typeof window.document !== 'undefined') ? 'browser' : 'node',\n  };\n\n  if (typeof key === 'undefined') {\n    return env;\n  }\n  return env[key];\n};\n","/**\n * terminateWorker\n *\n * @name terminateWorker\n * @function terminate worker\n * @access public\n */\nmodule.exports = (worker) => {\n  worker.terminate();\n};\n","const resolveURL = require('resolve-url');\nconst { version, dependencies } = require('../../../package.json');\nconst defaultOptions = require('../../constants/defaultOptions');\n\n/*\n * Default options for browser worker\n */\nmodule.exports = {\n  ...defaultOptions,\n  workerPath: (typeof process !== 'undefined' && process.env.FFMPEG_ENV === 'development')\n    ? resolveURL(`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`)\n    : `https://unpkg.com/@ffmpeg/ffmpeg@v${version}/dist/worker.min.js`,\n  corePath: `https://unpkg.com/@ffmpeg/core@v${dependencies['@ffmpeg/core'].substring(1)}/ffmpeg-core.js`,\n  workerBlobURL: true,\n};\n","// Copyright 2014 Simon Lydell\r\n// X11 (“MIT”) Licensed. (See LICENSE.)\r\n\r\nvoid (function(root, factory) {\r\n  if (typeof define === \"function\" && define.amd) {\r\n    define(factory)\r\n  } else if (typeof exports === \"object\") {\r\n    module.exports = factory()\r\n  } else {\r\n    root.resolveUrl = factory()\r\n  }\r\n}(this, function() {\r\n\r\n  function resolveUrl(/* ...urls */) {\r\n    var numUrls = arguments.length\r\n\r\n    if (numUrls === 0) {\r\n      throw new Error(\"resolveUrl requires at least one argument; got none.\")\r\n    }\r\n\r\n    var base = document.createElement(\"base\")\r\n    base.href = arguments[0]\r\n\r\n    if (numUrls === 1) {\r\n      return base.href\r\n    }\r\n\r\n    var head = document.getElementsByTagName(\"head\")[0]\r\n    head.insertBefore(base, head.firstChild)\r\n\r\n    var a = document.createElement(\"a\")\r\n    var resolved\r\n\r\n    for (var index = 1; index < numUrls; index++) {\r\n      a.href = arguments[index]\r\n      resolved = a.href\r\n      base.href = resolved\r\n    }\r\n\r\n    head.removeChild(base)\r\n\r\n    return resolved\r\n  }\r\n\r\n  return resolveUrl\r\n\r\n}));\r\n","const instanceOfAny = (object, constructors) => constructors.some(c => object instanceof c);\n\nlet idbProxyableTypes;\r\nlet cursorAdvanceMethods;\r\n// This is a function to prevent it throwing up in node environments.\r\nfunction getIdbProxyableTypes() {\r\n    return (idbProxyableTypes ||\r\n        (idbProxyableTypes = [\r\n            IDBDatabase,\r\n            IDBObjectStore,\r\n            IDBIndex,\r\n            IDBCursor,\r\n            IDBTransaction,\r\n        ]));\r\n}\r\n// This is a function to prevent it throwing up in node environments.\r\nfunction getCursorAdvanceMethods() {\r\n    return (cursorAdvanceMethods ||\r\n        (cursorAdvanceMethods = [\r\n            IDBCursor.prototype.advance,\r\n            IDBCursor.prototype.continue,\r\n            IDBCursor.prototype.continuePrimaryKey,\r\n        ]));\r\n}\r\nconst cursorRequestMap = new WeakMap();\r\nconst transactionDoneMap = new WeakMap();\r\nconst transactionStoreNamesMap = new WeakMap();\r\nconst transformCache = new WeakMap();\r\nconst reverseTransformCache = new WeakMap();\r\nfunction promisifyRequest(request) {\r\n    const promise = new Promise((resolve, reject) => {\r\n        const unlisten = () => {\r\n            request.removeEventListener('success', success);\r\n            request.removeEventListener('error', error);\r\n        };\r\n        const success = () => {\r\n            resolve(wrap(request.result));\r\n            unlisten();\r\n        };\r\n        const error = () => {\r\n            reject(request.error);\r\n            unlisten();\r\n        };\r\n        request.addEventListener('success', success);\r\n        request.addEventListener('error', error);\r\n    });\r\n    promise\r\n        .then(value => {\r\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\r\n        // (see wrapFunction).\r\n        if (value instanceof IDBCursor) {\r\n            cursorRequestMap.set(value, request);\r\n        }\r\n        // Catching to avoid \"Uncaught Promise exceptions\"\r\n    })\r\n        .catch(() => { });\r\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\r\n    // is because we create many promises from a single IDBRequest.\r\n    reverseTransformCache.set(promise, request);\r\n    return promise;\r\n}\r\nfunction cacheDonePromiseForTransaction(tx) {\r\n    // Early bail if we've already created a done promise for this transaction.\r\n    if (transactionDoneMap.has(tx))\r\n        return;\r\n    const done = new Promise((resolve, reject) => {\r\n        const unlisten = () => {\r\n            tx.removeEventListener('complete', complete);\r\n            tx.removeEventListener('error', error);\r\n            tx.removeEventListener('abort', error);\r\n        };\r\n        const complete = () => {\r\n            resolve();\r\n            unlisten();\r\n        };\r\n        const error = () => {\r\n            reject(tx.error);\r\n            unlisten();\r\n        };\r\n        tx.addEventListener('complete', complete);\r\n        tx.addEventListener('error', error);\r\n        tx.addEventListener('abort', error);\r\n    });\r\n    // Cache it for later retrieval.\r\n    transactionDoneMap.set(tx, done);\r\n}\r\nlet idbProxyTraps = {\r\n    get(target, prop, receiver) {\r\n        if (target instanceof IDBTransaction) {\r\n            // Special handling for transaction.done.\r\n            if (prop === 'done')\r\n                return transactionDoneMap.get(target);\r\n            // Polyfill for objectStoreNames because of Edge.\r\n            if (prop === 'objectStoreNames') {\r\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\r\n            }\r\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\r\n            if (prop === 'store') {\r\n                return receiver.objectStoreNames[1]\r\n                    ? undefined\r\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\r\n            }\r\n        }\r\n        // Else transform whatever we get back.\r\n        return wrap(target[prop]);\r\n    },\r\n    has(target, prop) {\r\n        if (target instanceof IDBTransaction &&\r\n            (prop === 'done' || prop === 'store')) {\r\n            return true;\r\n        }\r\n        return prop in target;\r\n    },\r\n};\r\nfunction addTraps(callback) {\r\n    idbProxyTraps = callback(idbProxyTraps);\r\n}\r\nfunction wrapFunction(func) {\r\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\r\n    // only create one new func per func.\r\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\r\n    if (func === IDBDatabase.prototype.transaction &&\r\n        !('objectStoreNames' in IDBTransaction.prototype)) {\r\n        return function (storeNames, ...args) {\r\n            const tx = func.call(unwrap(this), storeNames, ...args);\r\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\r\n            return wrap(tx);\r\n        };\r\n    }\r\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\r\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\r\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\r\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\r\n    // undefined if the end of the cursor has been reached.\r\n    if (getCursorAdvanceMethods().includes(func)) {\r\n        return function (...args) {\r\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\r\n            // the original object.\r\n            func.apply(unwrap(this), args);\r\n            return wrap(cursorRequestMap.get(this));\r\n        };\r\n    }\r\n    return function (...args) {\r\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\r\n        // the original object.\r\n        return wrap(func.apply(unwrap(this), args));\r\n    };\r\n}\r\nfunction transformCachableValue(value) {\r\n    if (typeof value === 'function')\r\n        return wrapFunction(value);\r\n    // This doesn't return, it just creates a 'done' promise for the transaction,\r\n    // which is later returned for transaction.done (see idbObjectHandler).\r\n    if (value instanceof IDBTransaction)\r\n        cacheDonePromiseForTransaction(value);\r\n    if (instanceOfAny(value, getIdbProxyableTypes()))\r\n        return new Proxy(value, idbProxyTraps);\r\n    // Return the same value back if we're not going to transform it.\r\n    return value;\r\n}\r\nfunction wrap(value) {\r\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\r\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\r\n    if (value instanceof IDBRequest)\r\n        return promisifyRequest(value);\r\n    // If we've already transformed this value before, reuse the transformed value.\r\n    // This is faster, but it also provides object equality.\r\n    if (transformCache.has(value))\r\n        return transformCache.get(value);\r\n    const newValue = transformCachableValue(value);\r\n    // Not all types are transformed.\r\n    // These may be primitive types, so they can't be WeakMap keys.\r\n    if (newValue !== value) {\r\n        transformCache.set(value, newValue);\r\n        reverseTransformCache.set(newValue, value);\r\n    }\r\n    return newValue;\r\n}\r\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { wrap as a, addTraps as b, instanceOfAny as c, reverseTransformCache as d, unwrap as e };\n","import { a as wrap, b as addTraps } from './chunk.js';\nexport { e as unwrap, a as wrap } from './chunk.js';\n\n/**\r\n * Open a database.\r\n *\r\n * @param name Name of the database.\r\n * @param version Schema version.\r\n * @param callbacks Additional callbacks.\r\n */\r\nfunction openDB(name, version, { blocked, upgrade, blocking } = {}) {\r\n    const request = indexedDB.open(name, version);\r\n    const openPromise = wrap(request);\r\n    if (upgrade) {\r\n        request.addEventListener('upgradeneeded', event => {\r\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction));\r\n        });\r\n    }\r\n    if (blocked)\r\n        request.addEventListener('blocked', () => blocked());\r\n    if (blocking) {\r\n        openPromise.then(db => db.addEventListener('versionchange', blocking)).catch(() => { });\r\n    }\r\n    return openPromise;\r\n}\r\n/**\r\n * Delete a database.\r\n *\r\n * @param name Name of the database.\r\n */\r\nfunction deleteDB(name, { blocked } = {}) {\r\n    const request = indexedDB.deleteDatabase(name);\r\n    if (blocked)\r\n        request.addEventListener('blocked', () => blocked());\r\n    return wrap(request).then(() => undefined);\r\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\r\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\r\nconst cachedMethods = new Map();\r\nfunction getMethod(target, prop) {\r\n    if (!(target instanceof IDBDatabase &&\r\n        !(prop in target) &&\r\n        typeof prop === 'string')) {\r\n        return;\r\n    }\r\n    if (cachedMethods.get(prop))\r\n        return cachedMethods.get(prop);\r\n    const targetFuncName = prop.replace(/FromIndex$/, '');\r\n    const useIndex = prop !== targetFuncName;\r\n    const isWrite = writeMethods.includes(targetFuncName);\r\n    if (\r\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\r\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\r\n        !(isWrite || readMethods.includes(targetFuncName))) {\r\n        return;\r\n    }\r\n    const method = async function (storeName, ...args) {\r\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\r\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\r\n        let target = tx.store;\r\n        if (useIndex)\r\n            target = target.index(args.shift());\r\n        const returnVal = target[targetFuncName](...args);\r\n        if (isWrite)\r\n            await tx.done;\r\n        return returnVal;\r\n    };\r\n    cachedMethods.set(prop, method);\r\n    return method;\r\n}\r\naddTraps(oldTraps => ({\r\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\r\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\r\n}));\n\nexport { openDB, deleteDB };\n","module.exports = (prefix, cnt) => (\n  `${prefix}-${cnt}-${Math.random().toString(16).slice(3, 8)}`\n);\n","const getId = require('./utils/getId');\n\nlet jobCounter = 0;\n\nmodule.exports = ({\n  id: _id,\n  action,\n  payload = {},\n}) => {\n  let id = _id;\n  if (typeof id === 'undefined') {\n    id = getId('Job', jobCounter);\n    jobCounter += 1;\n  }\n\n  return {\n    id,\n    action,\n    payload,\n  };\n};\n","const createJob = require('./createJob');\nconst { log } = require('./utils/log');\nconst getId = require('./utils/getId');\nconst extractProgress = require('./utils/extractProgress');\nconst resolvePaths = require('./utils/resolvePaths');\nconst {\n  defaultOptions,\n  spawnWorker,\n  terminateWorker,\n  onMessage,\n  send,\n  fetchFile,\n  fs,\n} = require('./worker/node');\n\nlet workerCounter = 0;\n\nmodule.exports = (_options = {}) => {\n  const id = getId('Worker', workerCounter);\n  const {\n    logger,\n    progress,\n    ...options\n  } = resolvePaths({\n    ...defaultOptions,\n    ..._options,\n  });\n  const resolves = {};\n  const rejects = {};\n  let worker = spawnWorker(options);\n\n  workerCounter += 1;\n\n  const setResolve = (action, res) => {\n    resolves[action] = res;\n  };\n\n  const setReject = (action, rej) => {\n    rejects[action] = rej;\n  };\n\n  const startJob = ({ id: jobId, action, payload }) => (\n    new Promise((resolve, reject) => {\n      log(`[${id}]: Start ${jobId}, action=${action}`);\n      setResolve(action, resolve);\n      setReject(action, reject);\n      send(worker, {\n        workerId: id,\n        jobId,\n        action,\n        payload,\n      });\n    })\n  );\n\n  const load = (jobId) => (\n    startJob(createJob({\n      id: jobId, action: 'load', payload: { options },\n    }))\n  );\n\n  const syncfs = (populate, jobId) => (\n    startJob(createJob({\n      id: jobId, action: 'syncfs', payload: { populate },\n    }))\n  );\n\n  const write = async (path, data) => {\n    await syncfs();\n    await fs.writeFile(path, await fetchFile(data));\n    await syncfs(true);\n    return {\n      path: `/data/${path}`,\n    };\n  };\n\n  const writeText = async (path, text) => {\n    await syncfs(true);\n    await fs.writeFile(path, text);\n    await syncfs(true);\n    return {\n      path: `/data/${path}`,\n    };\n  };\n\n  const read = async (path, del = true) => {\n    const data = await fs.readFile(path);\n    if (del) {\n      await fs.deleteFile(path);\n    }\n    return {\n      data,\n    };\n  };\n\n  const remove = async (path) => {\n    await fs.deleteFile(path);\n    return {\n      path: `/data/${path}`,\n    };\n  };\n\n  const run = (args, opts = {}, jobId) => (\n    startJob(createJob({\n      id: jobId, action: 'run', payload: { args, options: opts },\n    }))\n  );\n\n  const transcode = (input, output, opts = '', del = true, jobId) => (\n    run(\n      `-i /data/${input} ${opts} ${output}`,\n      { input, output, del },\n      jobId,\n    )\n  );\n\n  const trim = (input, output, from, to, opts = '', del = true, jobId) => (\n    run(\n      `-i /data/${input} -ss ${from} -to ${to} ${opts} ${output}`,\n      { input, output, del },\n      jobId,\n    )\n  );\n\n  const concatDemuxer = async (input, output, opts = '', del = true, jobId) => {\n    const text = input.reduce((acc, path) => `${acc}\\nfile ${path}`, '');\n    await writeText('concat_list.txt', text);\n    return run(`-f concat -safe 0 -i /data/concat_list.txt -c copy ${opts} ${output}`,\n      { del, output, input: [...input, 'concat_list.txt'] },\n      jobId);\n  };\n\n  const ls = (path, jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'FS',\n      payload: { method: 'readdir', args: [path] },\n    }))\n  );\n\n  const terminate = async (jobId) => {\n    if (worker !== null) {\n      await startJob(createJob({\n        id: jobId,\n        action: 'terminate',\n      }));\n      terminateWorker(worker);\n      worker = null;\n    }\n    return Promise.resolve();\n  };\n\n  onMessage(worker, ({\n    workerId, jobId, status, action, data,\n  }) => {\n    if (status === 'resolve') {\n      log(`[${workerId}]: Complete ${jobId}`);\n      let d = data;\n      if (action === 'FS') {\n        const { method, data: _data } = data;\n        if (method === 'readFile') {\n          d = Uint8Array.from({ ..._data, length: Object.keys(_data).length });\n        } else {\n          d = _data;\n        }\n      }\n      resolves[action]({ jobId, data: d });\n    } else if (status === 'reject') {\n      rejects[action](data);\n      throw Error(data);\n    } else if (status === 'progress') {\n      extractProgress(data, progress);\n      logger(data);\n    }\n  });\n\n  return {\n    id,\n    worker,\n    setResolve,\n    setReject,\n    load,\n    syncfs,\n    write,\n    writeText,\n    read,\n    remove,\n    run,\n    transcode,\n    trim,\n    concatDemuxer,\n    ls,\n    terminate,\n  };\n};\n","module.exports = (worker, handler) => {\n  worker.onmessage = ({ data }) => { // eslint-disable-line\n    handler(data);\n  };\n};\n","const { openDB } = require('idb');\n\nconst getDB = () => openDB('/data', 21);\n\nconst getDataKeyAndMode = async (db) => {\n  const dummy = await db.get('FILE_DATA', '/data/.DUMMY');\n  const dataKey = Object.keys(dummy).filter((k) => !['mode', 'timestamp'].includes(k)).pop();\n  return { dataKey, mode: dummy.mode };\n};\n\nmodule.exports = {\n  readFile: async (path) => {\n    const db = await getDB();\n    const { dataKey } = await getDataKeyAndMode(db);\n    return (await db.get('FILE_DATA', `/data/${path}`))[dataKey];\n  },\n  writeFile: async (path, data) => {\n    const db = await getDB();\n    const { dataKey, mode } = await getDataKeyAndMode(db);\n    await db.put(\n      'FILE_DATA',\n      {\n        [dataKey]: data,\n        mode,\n        timestamp: new Date(),\n      },\n      `/data/${path}`,\n    );\n  },\n  deleteFile: async (path) => {\n    const db = await getDB();\n    await db.delete('FILE_DATA', `/data/${path}`);\n  },\n};\n","import createWorker from \"@ffmpeg/ffmpeg/src/createWorker\";\r\n\r\ncreateWorker()\r\n  .load()\r\n  .then(() => postMessage());\r\n","let logging = false;\n\nexports.logging = logging;\n\nexports.setLogging = (_logging) => {\n  logging = _logging;\n};\n\nexports.log = (...args) => (logging ? console.log.apply(this, args) : null);\n","/**\n * spawnWorker\n *\n * @name spawnWorker\n * @function create a new Worker in browser\n * @access public\n */\nmodule.exports = ({ workerPath, workerBlobURL }) => {\n  let worker;\n  if (Blob && URL && workerBlobURL) {\n    /* Use Blob to load cross domain worker script */\n    const blob = new Blob([`importScripts(\"${workerPath}\");`], {\n      type: 'application/javascript',\n    });\n    worker = new Worker(URL.createObjectURL(blob));\n  } else {\n    worker = new Worker(workerPath);\n  }\n  return worker;\n};\n","let duration = 0;\n\nconst ts2sec = (ts) => {\n  const [h, m, s] = ts.split(':');\n  return (parseFloat(h) * 60 * 60) + (parseFloat(m) * 60) + parseFloat(s);\n};\n\nmodule.exports = ({ message }, progress) => {\n  if (typeof message === 'string') {\n    if (message.startsWith('  Duration')) {\n      const ts = message.split(', ')[0].split(': ')[1];\n      const d = ts2sec(ts);\n      if (duration === 0 || duration > d) {\n        duration = d;\n      }\n    } else if (message.startsWith('frame')) {\n      const ts = message.split('time=')[1].split(' ')[0];\n      const t = ts2sec(ts);\n      progress({ ratio: t / duration });\n    } else if (message.startsWith('video:')) {\n      progress({ ratio: 1 });\n    }\n  }\n};\n","const resolveURL = require('resolve-url');\n\n/**\n * readFromBlobOrFile\n *\n * @name readFromBlobOrFile\n * @function\n * @access private\n */\nconst readFromBlobOrFile = (blob) => (\n  new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n      resolve(fileReader.result);\n    };\n    fileReader.onerror = ({ target: { error: { code } } }) => {\n      reject(Error(`File could not be read! Code=${code}`));\n    };\n    fileReader.readAsArrayBuffer(blob);\n  })\n);\n\nmodule.exports = async (_data) => {\n  let data = _data;\n  if (typeof _data === 'undefined') {\n    return 'undefined';\n  }\n\n  if (typeof _data === 'string') {\n    // Base64 _data\n    if (/data:_data\\/([a-zA-Z]*);base64,([^\"]*)/.test(_data)) {\n      data = atob(_data.split(',')[1])\n        .split('')\n        .map((c) => c.charCodeAt(0));\n    } else {\n      const res = await fetch(resolveURL(_data));\n      data = await res.arrayBuffer();\n    }\n  } else if (_data instanceof File || _data instanceof Blob) {\n    data = await readFromBlobOrFile(_data);\n  }\n\n  return new Uint8Array(data);\n};\n","module.exports = {\n  logger: () => {},\n  progress: () => {},\n};\n","/**\n * send\n *\n * @name send\n * @function send packet to worker and create a job\n * @access public\n */\nmodule.exports = async (worker, packet) => {\n  worker.postMessage(packet);\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n"],"sourceRoot":""}